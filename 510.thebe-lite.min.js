/*! For license information please see 510.thebe-lite.min.js.LICENSE.txt */
(self.webpackChunkthebe_lite=self.webpackChunkthebe_lite||[]).push([[510],{144:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PIPLITE_INDEX_SCHEMA:()=>N,PyodideKernel:()=>L,PyodideRemoteKernel:()=>z.O,allJSONUrl:()=>a,ipykernelWheelUrl:()=>r,pipliteWheelUrl:()=>l,pyodide_kernelWheelUrl:()=>c,widgetsnbextensionWheelUrl:()=>u,widgetsnbextensionWheelUrl1:()=>m});const n=s.p+"pypi/all.json";var a=s.t(n);const i=s.p+"pypi/ipykernel-6.9.2-py3-none-any.whl";var r=s.t(i);const o=s.p+"pypi/piplite-0.2.0-py3-none-any.whl";var l=s.t(o);const p=s.p+"pypi/pyodide_kernel-0.2.0-py3-none-any.whl";var c=s.t(p);const d=s.p+"pypi/widgetsnbextension-3.6.6-py3-none-any.whl";var u=s.t(d);const h=s.p+"pypi/widgetsnbextension-4.0.9-py3-none-any.whl";var m=s.t(h),y=s(5082),g=s(9622),_=s(6914),f=s(4016);class b{constructor(e){this._history=[],this._executionCount=0,this._isDisposed=!1,this._disposed=new f.Signal(this),this._parentHeader=void 0,this._parent=void 0;const{id:t,name:s,location:n,sendMessage:a}=e;this._id=t,this._name=s,this._location=n,this._sendMessage=a}get ready(){return Promise.resolve()}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get id(){return this._id}get name(){return this._name}get location(){return this._location}get executionCount(){return this._executionCount}get parentHeader(){return this._parentHeader}get parent(){return this._parent}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(void 0))}async handleMessage(e){switch(this._busy(e),this._parent=e,e.header.msg_type){case"kernel_info_request":await this._kernelInfo(e);break;case"execute_request":await this._execute(e);break;case"input_reply":this.inputReply(e.content);break;case"inspect_request":await this._inspect(e);break;case"is_complete_request":await this._isCompleteRequest(e);break;case"complete_request":await this._complete(e);break;case"history_request":await this._historyRequest(e);break;case"comm_open":await this.commOpen(e);break;case"comm_msg":await this.commMsg(e);break;case"comm_close":await this.commClose(e)}this._idle(e)}stream(e,t=undefined){var s;const n=void 0!==t?t:this._parentHeader,a=_.KernelMessage.createMessage({channel:"iopub",msgType:"stream",session:null!==(s=null==n?void 0:n.session)&&void 0!==s?s:"",parentHeader:n,content:e});this._sendMessage(a)}displayData(e,t=undefined){var s,n;const a=void 0!==t?t:this._parentHeader;e.metadata=null!==(s=e.metadata)&&void 0!==s?s:{};const i=_.KernelMessage.createMessage({channel:"iopub",msgType:"display_data",session:null!==(n=null==a?void 0:a.session)&&void 0!==n?n:"",parentHeader:a,content:e});this._sendMessage(i)}inputRequest(e,t=undefined){var s;const n=void 0!==t?t:this._parentHeader,a=_.KernelMessage.createMessage({channel:"stdin",msgType:"input_request",session:null!==(s=null==n?void 0:n.session)&&void 0!==s?s:"",parentHeader:n,content:e});this._sendMessage(a)}publishExecuteResult(e,t=undefined){var s;const n=void 0!==t?t:this._parentHeader,a=_.KernelMessage.createMessage({channel:"iopub",msgType:"execute_result",session:null!==(s=null==n?void 0:n.session)&&void 0!==s?s:"",parentHeader:n,content:e});this._sendMessage(a)}publishExecuteError(e,t=undefined){var s;const n=void 0!==t?t:this._parentHeader,a=_.KernelMessage.createMessage({channel:"iopub",msgType:"error",session:null!==(s=null==n?void 0:n.session)&&void 0!==s?s:"",parentHeader:n,content:e});this._sendMessage(a)}updateDisplayData(e,t=undefined){var s;const n=void 0!==t?t:this._parentHeader,a=_.KernelMessage.createMessage({channel:"iopub",msgType:"update_display_data",session:null!==(s=null==n?void 0:n.session)&&void 0!==s?s:"",parentHeader:n,content:e});this._sendMessage(a)}clearOutput(e,t=undefined){var s;const n=void 0!==t?t:this._parentHeader,a=_.KernelMessage.createMessage({channel:"iopub",msgType:"clear_output",session:null!==(s=null==n?void 0:n.session)&&void 0!==s?s:"",parentHeader:n,content:e});this._sendMessage(a)}handleComm(e,t,s,n,a=undefined){var i;const r=void 0!==a?a:this._parentHeader,o=_.KernelMessage.createMessage({channel:"iopub",msgType:e,session:null!==(i=null==r?void 0:r.session)&&void 0!==i?i:"",parentHeader:r,content:t,metadata:s,buffers:n});this._sendMessage(o)}_idle(e){const t=_.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"idle"}});this._sendMessage(t)}_busy(e){const t=_.KernelMessage.createMessage({msgType:"status",session:e.header.session,parentHeader:e.header,channel:"iopub",content:{execution_state:"busy"}});this._sendMessage(t)}async _kernelInfo(e){const t=await this.kernelInfoRequest(),s=_.KernelMessage.createMessage({msgType:"kernel_info_reply",channel:"shell",session:e.header.session,parentHeader:e.header,content:t});this._sendMessage(s)}async _historyRequest(e){const t=e,s=_.KernelMessage.createMessage({msgType:"history_reply",channel:"shell",parentHeader:t.header,session:e.header.session,content:{status:"ok",history:this._history}});this._sendMessage(s)}_executeInput(e){const t=e,s=t.content.code,n=_.KernelMessage.createMessage({msgType:"execute_input",parentHeader:t.header,channel:"iopub",session:e.header.session,content:{code:s,execution_count:this._executionCount}});this._sendMessage(n)}async _execute(e){const t=e,s=t.content;s.store_history&&this._executionCount++,this._parentHeader=t.header,this._executeInput(t),s.store_history&&this._history.push([0,0,s.code]);const n=await this.executeRequest(t.content),a=_.KernelMessage.createMessage({msgType:"execute_reply",channel:"shell",parentHeader:t.header,session:e.header.session,content:n});this._sendMessage(a)}async _complete(e){const t=e,s=await this.completeRequest(t.content),n=_.KernelMessage.createMessage({msgType:"complete_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:s});this._sendMessage(n)}async _inspect(e){const t=e,s=await this.inspectRequest(t.content),n=_.KernelMessage.createMessage({msgType:"inspect_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:s});this._sendMessage(n)}async _isCompleteRequest(e){const t=e,s=await this.isCompleteRequest(t.content),n=_.KernelMessage.createMessage({msgType:"is_complete_reply",parentHeader:t.header,channel:"shell",session:e.header.session,content:s});this._sendMessage(n)}}const v=Symbol("Comlink.proxy"),w=Symbol("Comlink.endpoint"),M=Symbol("Comlink.releaseProxy"),k=Symbol("Comlink.finalizer"),x=Symbol("Comlink.thrown"),E=e=>"object"==typeof e&&null!==e||"function"==typeof e,H=new Map([["proxy",{canHandle:e=>E(e)&&e[v],serialize(e){const{port1:t,port2:s}=new MessageChannel;return R(e,t),[s,[s]]},deserialize:e=>(e.start(),C(e))}],["throw",{canHandle:e=>E(e)&&x in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function R(e,t=globalThis,s=["*"]){t.addEventListener("message",(function n(a){if(!a||!a.data)return;if(!function(e,t){for(const s of e){if(t===s||"*"===s)return!0;if(s instanceof RegExp&&s.test(t))return!0}return!1}(s,a.origin))return void console.warn(`Invalid origin '${a.origin}' for comlink proxy`);const{id:i,type:r,path:o}=Object.assign({path:[]},a.data),l=(a.data.argumentList||[]).map(I);let p;try{const t=o.slice(0,-1).reduce(((e,t)=>e[t]),e),s=o.reduce(((e,t)=>e[t]),e);switch(r){case"GET":p=s;break;case"SET":t[o.slice(-1)[0]]=I(a.data.value),p=!0;break;case"APPLY":p=s.apply(t,l);break;case"CONSTRUCT":p=function(e){return Object.assign(e,{[v]:!0})}(new s(...l));break;case"ENDPOINT":{const{port1:t,port2:s}=new MessageChannel;R(e,s),p=function(e,t){return U.set(e,t),e}(t,[t])}break;case"RELEASE":p=void 0;break;default:return}}catch(e){p={value:e,[x]:0}}Promise.resolve(p).catch((e=>({value:e,[x]:0}))).then((s=>{const[a,o]=j(s);t.postMessage(Object.assign(Object.assign({},a),{id:i}),o),"RELEASE"===r&&(t.removeEventListener("message",n),T(t),k in e&&"function"==typeof e[k]&&e[k]())})).catch((e=>{const[s,n]=j({value:new TypeError("Unserializable return value"),[x]:0});t.postMessage(Object.assign(Object.assign({},s),{id:i}),n)}))})),t.start&&t.start()}function T(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function C(e,t){return S(e,[],t)}function K(e){if(e)throw new Error("Proxy has been released and is not useable")}function P(e){return A(e,{type:"RELEASE"}).then((()=>{T(e)}))}const O=new WeakMap,q="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(O.get(e)||0)-1;O.set(e,t),0===t&&P(e)}));function S(e,t=[],s=function(){}){let n=!1;const a=new Proxy(s,{get(s,i){if(K(n),i===M)return()=>{!function(e){q&&q.unregister(e)}(a),P(e),n=!0};if("then"===i){if(0===t.length)return{then:()=>a};const s=A(e,{type:"GET",path:t.map((e=>e.toString()))}).then(I);return s.then.bind(s)}return S(e,[...t,i])},set(s,a,i){K(n);const[r,o]=j(i);return A(e,{type:"SET",path:[...t,a].map((e=>e.toString())),value:r},o).then(I)},apply(s,a,i){K(n);const r=t[t.length-1];if(r===w)return A(e,{type:"ENDPOINT"}).then(I);if("bind"===r)return S(e,t.slice(0,-1));const[o,l]=D(i);return A(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:o},l).then(I)},construct(s,a){K(n);const[i,r]=D(a);return A(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:i},r).then(I)}});return function(e,t){const s=(O.get(t)||0)+1;O.set(t,s),q&&q.register(e,t,e)}(a,e),a}function D(e){const t=e.map(j);return[t.map((e=>e[0])),(s=t.map((e=>e[1])),Array.prototype.concat.apply([],s))];var s}const U=new WeakMap;function j(e){for(const[t,s]of H)if(s.canHandle(e)){const[n,a]=s.serialize(e);return[{type:"HANDLER",name:t,value:n},a]}return[{type:"RAW",value:e},U.get(e)||[]]}function I(e){switch(e.type){case"HANDLER":return H.get(e.name).deserialize(e.value);case"RAW":return e.value}}function A(e,t,s){return new Promise((n=>{const a=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(s){s.data&&s.data.id&&s.data.id===a&&(e.removeEventListener("message",t),n(s.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),s)}))}class L extends b{constructor(e){super(e),this._ready=new y.PromiseDelegate,this._worker=this.initWorker(e),this._worker.onmessage=e=>this._processWorkerMessage(e.data),this._remoteKernel=C(this._worker),this.initRemote(e)}initWorker(e){return new Worker(new URL(s.p+s.u(946),s.b),{type:void 0})}async initRemote(e){const t=this.initRemoteOptions(e);await this._remoteKernel.initialize(t),this._ready.resolve()}initRemoteOptions(e){const{pyodideUrl:t}=e,s=t.slice(0,t.lastIndexOf("/")+1),a=g.PageConfig.getBaseUrl(),i=[...e.pipliteUrls||[],n],r=!!e.disablePyPIFallback;return{baseUrl:a,pyodideUrl:t,indexUrl:s,pipliteWheelUrl:e.pipliteWheelUrl||o,pipliteUrls:i,disablePyPIFallback:r,location:this.location,mountDrive:e.mountDrive}}dispose(){this.isDisposed||(this._worker.terminate(),this._worker=null,super.dispose())}get ready(){return this._ready.promise}_processWorkerMessage(e){var t,s,n,a,i,r,o;if(e.type)switch(e.type){case"stream":{const s=null!==(t=e.bundle)&&void 0!==t?t:{name:"stdout",text:""};this.stream(s,e.parentHeader);break}case"input_request":{const t=null!==(s=e.content)&&void 0!==s?s:{prompt:"",password:!1};this.inputRequest(t,e.parentHeader);break}case"display_data":{const t=null!==(n=e.bundle)&&void 0!==n?n:{data:{},metadata:{},transient:{}};this.displayData(t,e.parentHeader);break}case"update_display_data":{const t=null!==(a=e.bundle)&&void 0!==a?a:{data:{},metadata:{},transient:{}};this.updateDisplayData(t,e.parentHeader);break}case"clear_output":{const t=null!==(i=e.bundle)&&void 0!==i?i:{wait:!1};this.clearOutput(t,e.parentHeader);break}case"execute_result":{const t=null!==(r=e.bundle)&&void 0!==r?r:{execution_count:0,data:{},metadata:{}};this.publishExecuteResult(t,e.parentHeader);break}case"execute_error":{const t=null!==(o=e.bundle)&&void 0!==o?o:{ename:"",evalue:"",traceback:[]};this.publishExecuteError(t,e.parentHeader);break}case"comm_msg":case"comm_open":case"comm_close":this.handleComm(e.type,e.content,e.metadata,e.buffers,e.parentHeader)}}async kernelInfoRequest(){return{implementation:"pyodide",implementation_version:"0.1.0",language_info:{codemirror_mode:{name:"python",version:3},file_extension:".py",mimetype:"text/x-python",name:"python",nbconvert_exporter:"python",pygments_lexer:"ipython3",version:"3.8"},protocol_version:"5.3",status:"ok",banner:"A WebAssembly-powered Python kernel backed by Pyodide",help_links:[{text:"Python (WASM) Kernel",url:"https://pyodide.org"}]}}async executeRequest(e){await this.ready;const t=await this._remoteKernel.execute(e,this.parent);return t.execution_count=this.executionCount,t}async completeRequest(e){return await this._remoteKernel.complete(e,this.parent)}async inspectRequest(e){return await this._remoteKernel.inspect(e,this.parent)}async isCompleteRequest(e){return await this._remoteKernel.isComplete(e,this.parent)}async commInfoRequest(e){return await this._remoteKernel.commInfo(e,this.parent)}async commOpen(e){return await this._remoteKernel.commOpen(e,this.parent)}async commMsg(e){return await this._remoteKernel.commMsg(e,this.parent)}async commClose(e){return await this._remoteKernel.commClose(e,this.parent)}async inputReply(e){return await this._remoteKernel.inputReply(e,this.parent)}}const W=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema","$id":"https://jupyterlite-pyodide-kernel.readthedocs.org/en/latest/reference/schema/piplite-v0.html#","title":"PipLite Schema v0","description":"a schema for the warehouse-like API index","$ref":"#/definitions/top","definitions":{"top":{"type":"object","patternProperties":{".*":{"$ref":"#/definitions/a-piplite-project"}}},"a-piplite-project":{"type":"object","description":"a piplite-installable project, with one or more historical releases","properties":{"releases":{"patternProperties":{".*":{"type":"array","items":{"$ref":"#/definitions/a-piplite-distribution"}}}}}},"a-piplite-distribution":{"type":"object","properties":{"comment_text":{"type":"string"},"digests":{"type":"object","properties":{"md5":{"$ref":"#/definitions/an-md5-digest"},"sha256":{"$ref":"#/definitions/a-sha256-digest"}}},"downloads":{"type":"number"},"filename":{"type":"string"},"has_sig":{"type":"boolean"},"md5_digest":{"$ref":"#/definitions/an-md5-digest"},"packagetype":{"type":"string","enum":["bdist_wheel"]},"python_version":{"type":"string"},"requires_python":{"$ref":"#/definitions/string-or-null"},"size":{"type":"number"},"upload_time":{"type":"string","format":"date-time"},"upload_time_iso_8601":{"type":"string","format":"date-time"},"url":{"type":"string","format":"uri"},"yanked":{"type":"boolean"},"yanked_reason":{"$ref":"#/definitions/string-or-null"}}},"string-or-null":{"anyOf":[{"type":"string"},{"type":"null"}]},"an-md5-digest":{"type":"string","pattern":"[a-f0-9]{32}"},"a-sha256-digest":{"type":"string","pattern":"[a-f0-9]{64}"}}}');var N=s.t(W,2),z=s(3296)},265:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=265,e.exports=t}}]);
//# sourceMappingURL=510.thebe-lite.min.js.map